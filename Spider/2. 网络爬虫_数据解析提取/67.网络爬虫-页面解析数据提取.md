# **Python实战——网络爬虫——页面解析数据提取——学习心得笔记**
  
# 1. 页面解析和数据提取简介
- 结构数据：先有的结构，再谈数据
    - JSON文件
        - JSON Path
        - 转换成Python类型进行操作（json类）
    - XML文件
        - 转化为Python类型进行操作（xml to dict)
        - XPath
        - CSS选择器
        - 正则表达式

- 非结构化数据：现有数据，再谈结构
    - 文本
    - 电话号码
    - 邮箱地址
    - 通常处理上述数据，都有一定的规律，使用正则表达式
    - HTML文件
        - 正则
        - XPath
        - CSS选择器
        
# 2. 正则表达式
- 一套规则，可以字符串文本中进行搜索替换等  
- 案例67_1，re的基本使用流程   
- 正则常用方法函数：

    - compile 函数用于编译正则表达式
    - 生成一个正则表达式（ Pattern ）对象
    - 供 match() 和 search() 这两个函数使用
    - re.match函数
        尝试从字符串的起始位置匹配一个模式，如果不是起始位置匹配成功的话，match()就返回none。
        re.match(pattern, string, flags=0)
    - re.search 扫描整个字符串并返回第一个成功的匹配
        re.search(pattern, string, flags=0)
    - group() 或 groups() 匹配对象函数来获取匹配表达式
    - re.sub用于替换字符串中的匹配项
        re.sub(pattern, repl, string, count=0)
    - start() 返回匹配开始的位置
    - end() 返回匹配结束的位置
    - span() 返回一个元组包含匹配 (开始,结束) 的位置 
    - 参考案例36_1/2/3.py
    
- re.match和re.search的区别  
    - re.match只匹配字符串的开始，如果字符串开始不符合正则表达式，则匹配失败，函数返回None；
    - 而re.search匹配整个字符串，直到找到一个匹配。 
    
- 匹配中文
    - 大部分中文内容表示范围是[u4e00-u9fa5]  
    - findall找出所有的匹配
    - 看案例36_4
    
- 贪婪和非贪婪
    - 贪婪：尽可能多的匹配（*）表示
    - 非贪婪：找到符合条件的最小内容即可，（？）表示
    - 正则默认使用贪婪匹配
    - 看案例36_5
    
# 3. XML XPath 请参考高级语言中的内容

# 4. lxml
- Python下的HTML/XML的解析器
- 官方文档：https://lxml.de/
- 参考教程：https://www.cnblogs.com/zhangxinqi/p/9210211.html#_label5

- 解析字符串为一个HTML对象
    - 参考实例67_2  
    
- 读取HTML文件，进行解析
    - 参考实例67_3  
    
- etree和XPath的配合使用
    - 参考案例67_4  
    
- 属性匹配格式
    - 参考案例67_5
    
- 综合案例：抓取TIOBE指数前20名排行开发语言
    - 参考案例67_6    
    
# 5. CSS选择器 
- BeautifulSoup4
- 官方文档地址：
    https://beautifulsoup.readthedocs.io/zh_CN/v4.4.0/#id7
- 几个常用提取信息工具的比较
    - 正则：很快，但是正则表达式很难完美写出
    - beautifulsoup4: 慢，使用简单，安装简单，数据较少时推荐使用
    - lxml: 比较快，使用简单，安装一般
- BeautifulSoup4的用法
- 参考案例67_7        

## 5.1. HTML或XML中的四大对象
- 四大对象
    - Tag
    - NavigableString
    - Beautifulsoup
    - Comment

- Tag
    - 对应HTML中的标签
    - 可以通过soup.tag_name
    - tag标签有两个重要的属性
        - name
        - attribute(使用时用.attrs)
            - attrs属性是一个字典，修改删除类似于字典
    - 参考实例67_8  
    
- NavigableString
    - 查看标签内容中的值    
    - 用法tag_name.string
    - 参考实例67_9
    
- Beautifulsoup 
    - 表示一个文档的内容，大部分可以当做一个tag对象
    - Beautifulsoup实例的对象包含一个特殊的属性
    - 对象包含了一个值为 “[document]” 的特殊属性 
    - 使用方法 soup.name
    - 参考实例67_9
    
- Comment
    - 通常情况下Tag , NavigableString , BeautifulSoup 几乎覆盖了
    - html和xml中的所有内容,但是还有一些特殊对象.
    - 容易让人担心的内容是文档的注释部分 
    - Comment对象是一个特殊类型的 NavigableString 对象  
    - 参考实例67_10
    

               
