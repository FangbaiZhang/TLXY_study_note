# **Python——面向对象（OOP）学习心得笔记**

# 写在前面的话
- 推荐书店[阅轩图书专营店-天猫](https://yuexuants.tmall.com/shop/view_shop.htm)
- 推荐图书[Python编程从入门到实践]
# 0. OOP-Python面向对象
- Python的面向对象
- 面向对象编程
    - 基础
    - 公有私有
    - 继承
    - 组合. Minxi
- 魔法函数
    - 魔法函数概述
    - 构造类魔法函数
    - 运算类魔法函数

# 1. 面向对象概述（ObjectOriented . 00)
- OOP思想
    - 接触到任意一个任务，首先想到的是任务这个世界的构成，是由模型构成的
    - OO: Object Oriented 面向对象
    - OOA：面向对象的分析
    - OOD：面向对象的设计
    - OOI: 面向对象的实现
    - OOP: 面向对象的编程
    - OOA->OOD->OOI: 面向对象的实现过程

# 2. 类和对象的概述
- 类和对象的概念
    - 类：抽象名词，代表一个集合，共性的事物
    - 对象：具象的事物，单个个体
    - 类和对象的关系：
        - 一个具象，代表一类事物的某一个个体
        - 一个是抽象，代表的某一类事物
- 类中的内容，应该具有两个内容
    - 表明事物的特征，叫做属性（变量）
    - 表明事物功能或者动作，称为成员方法（函数）        

# 3. 类的基本实现
- 类的命名
    - 大驼峰命名法，单个单词或者多个单词相连，直接相连，首字母大写，AppleNameClass
    - 尽量避开跟系统命名相似的命名
- 访问对象
    - 句点法
    
# 4. 类和对象的成员分析
- 类和对象都可以存储成员，成员可以归类所有，也可以归对象所有
- 类存储成员时使用的是与类关联的一个对象
- 独享存储成员是存储在当前对象中
- 对象访问一个成员时，如果对象中没有该成员，尝试访问类中的同名成员
    如果对象中有此成员，一定使用对象中的成员
- 通过对象对类中成员重新赋值，或者通过对象添加成员时，对应成员会保存在对象中，而不会修改类成员的对象

# 5. 关于self   
- self在对象的方法中表示当前对象本身，如果通过对象调用一个方法，那么该对象会自动传入到当前方法的第一个参数中
- self并不是关键字，只是一个接受对象的普通参数，理论上可以用任何一个变量名代替

# 6. 面向对象的三大特征
- 封装
- 继承
- 多态

## 6.1. 封装
- 封装就是对对象的成员进行访问限制
- 封装的三个级别：
    - 公开 public
    - 受保护的 protected
    - 私有的 private
    - public protected private不是关键字
- 判别对象的位置
    - 对象内部
    - 对象外部
    - 子类中
- 私有
    - 私有成员最高级别封装，只能在当前类或者对象中访问
    - 在成员前面添加两个下划线即可：
            
            class Person():
                # name是拥有的成员
                name = "liuying"
                # age是私有成员
                __age = "20"
                
    - Python的私有不是真的私有，只是改了一个名，是一种成为name manling的改名方法
    可以使用对象._classname__attributename访问 
    
    class Person():
    # 公有成员
    name = "liuying"
    age = 20
    # 私有成员
    __age = 20
    
    p = Person()
    # 访问私有成员的方法
    print(p._Person__age)  

- 受保护的对象 protected
    - 受保护的封装是将对象成员进行一定级别的封装，然后在类中或者子类中都可以进行访问，但是在外部不可以
    - 封装方法：在成员名称前面加一个下划线即可
    
- 公开的 public’
    - 公共的封装实际对成员没有任何操作，任何地方都可以访问

## 6.2. 类的继承
    - 类的继承的写法
    class Person():
        name = "noname"
        age = 0
        def sleep(self):
            print("sleeping...")
    
    class Teacher(Person):

- 作用：减少代码，增加代码的复用功能
- 被继承的类叫父类、超类、基类
- 用于继承的类叫子类、也叫派生类
- 继承的特征
    - 子类一旦继承父类，则可以使用父类中除私有成员外所有的内容
    - 子类继承父类后并没有将父类完全赋值到子类中，而是通过引用关系访问调用
    - 子类中可以定义独有的成员或者方法
    - 子类中定义的成员和父类成员如果相同，则优先使用子类的成员
    - 子类如果想扩充父类的方法，可以定义新方法同时访问父类成员来进行代码重用

## 6.3. 构造函数
- 是一类特殊的函数，__init__就是构造函数，在类进行实例化时最先调用
- 每次实例化的时候，第一个被调用
- 因为主要工作是初始化
class Dog():
    def __init__(self)：
        print（“i"）    

- super
    - super,是一个类，不是关键字
    - super的作用是获取MRO（MethodResolustionOrder)列表中的第一个类
    - super与父类没有直接任何实质性的关系，但是通过super可以调用到父类
    - super在构造函数中调用父类函数的构造函数
    
    class ElectricCar(Car):
    """电动汽车的独特之处"""
        def __init__(self, make, model, year):
        """初始化父类的属性"""
            super().__init__(make, model, year)
                
                  

## 6.4. 单继承和多继承
- 单继承：每个类只继承一个类
- 多继承：每个类允许继承多个类

- 单继承和多继承的优缺点：
    - 单继承
        - 传承有序逻辑清晰语法简单隐患少
        - 功能不能无限扩展，只能在当前唯一的继承链中扩展
    - 多继承（不推荐使用）
        - 类的功能扩展方便
        - 继承关系混乱   
        
## 6.5. 多态
- 多态就是同一个对象在不同情况下有不同的状态出现
- 多态不是语法，是一种设计思想
- 多态性：一种调用方式，不同的执行效果
- 多态：同一事物的多种形态，动物分为人类，狗类，猫类。。。。。。

- Mixin设计模式

- Mixin的特点
    - 首先它必须表示某一种功能，而不是某个物品，如同Java中的Runnable，Callable等
    - 其次它必须责任单一，如果有多个功能，那就写多个Mixin类
    - 然后，它不依赖于子类的实现
    - 最后，子类即便没有继承这个Mixin类，也照样可以工作，就是缺少了某个功能。

- Minxin的优点
    - 使用Mixin可以在不对类进行任何修改的情况下，扩充功能
    - 可以方便的组织和维护不同功能组件的划分
    - 可以根据需要任意调整功能类的组合
    - 可以避免创建很多新的类，导致类的继承混乱    
    
## 6.6. 类的相关函数
- issubclass(B, A)  B是否是A的子类
- object类是类中的超级类，所有类都是object类的子类，见MRO解析顺序就可以知道
- issubclass(B, object) 输出结果为True
- isinstance 检测一个对象是否为一个类的实例
- hasattr 检测一个对象是否有成员xxx
- dir 获取对象的成员列表

## 6.7. 类的成员描述（类的属性）
- 类的成员描述是为了对类的成员属性进行相关操作而创建的一种方式
- 常用方法：类下面创建一个方法，然后初始化属性调用这个方法
    - get 获取属性的操作
    - set 修改或者添加属性的操作
    - delete 删除属性的操作
- 使用类的成员描述符，大概有三种方法
    - 使用类实现描述器
    - 使用属性修饰符
    - 使用property函数
        property(fget, fset, fdel, doc)
        
## 6.8. 类的内置属性

    __dict__: 以字典的方式显示成员的组成
    __doc__: 获取类的文档信息
    __name__: 获取类的名称，如果在模块中使用，获取模块的名称
    __bases__； 获取某个类的父类，以元组的方式显示   
    
# 7. 类的常用魔术方法
- 魔术方法就是不需要人为调用的方法，基本是在特定的时刻自动触发
- 魔术方法的统一特征，方法名前后各两个下划线包裹
- 操作类
        
        __init__: 构造函数
        __new__: 对象实例化方法，此函数特殊，一般不要使用
        __call__: 对象当函数使用时触发
        __str__: 当对象被当做字符串时候调用，方便直观读取
        __repr__: 返回字符串，返回准确的信息，直接看实例区别
        
- 描述符相关
        
        __set__: 
        __get__:
        __delete__: 
        
- 属性操作相关
    - __getattr__：访问一个不存在的属性时触发
    - __setattr__: 对成员属性进行设置的时候触发这个函数
        - 需要的参数：
            - self用来获取当前对象
            - 被设置的属性名称，以字符串形式出现
            - 需要对属性名称设置的值
        - 作用： 进行属性设置的时候进行验证或者修改
        - 注意： 在该方法中不能对属性直接进行肤质操作，否则进入死循环
        - 参考实例
        
- 运算分类相关的魔法函数
    - __gt__: 进行大于判断时候触发的函数
        - 参数
            - self
            - 第二个参数是第二个对象
            - 返回值可以是任何值，推荐使用布尔值
            - 参考实例            
    
# 8. 类和对象的三种方法
- 实例方法
    - 需要实例化对象才能使用的方法，使用过程中需要截止对象的其他对象的方法完成
- 静态方法
    - 不需要实例化，通过类直接访问
- 类方法
    - 不需要实例化 
- 参考实例    

# 9. 类-成员描述符
- 类属性property
- 结合6.7.查看
- 参考实例

# 10. 抽象类
- 抽象方法：没有具体实现内容的方法
- 抽象方法主要的意义：规范了子类的行为和接口
- 抽象类的使用需要借助abc模块

    import abc
    
- 抽象类：包含抽象方法的类叫抽象类，通常叫做ABC类
- 抽象类的使用
    - 抽象类可以包含抽象的方法，也可以包含具体的方法    
    - 抽象类中可以有方法和属性
    - 抽象的类不允许实例化
    - 必须继承才可以使用，且继承的子类必须实现所有继承来的抽象方法
    - 假定子类没有实现所有继承的抽象方法，子类也不能实例化
    - 抽象类的作用是设定类的标准，以便于开发的时候具有统一的规范
    
# 11. 自定义类
- 类其实是一个自定义类和方法的组合
- 可以定义类和函数，然后自己通过类直接赋值
- 可以借助于MethodType实现
- 利用type实现
- 利用元类实现 MetaClass
    - 元类是类
    - 用来创造别的类     
- 参考实例
                            
